{"version":3,"sources":["../src/react-avatar-image-cropper.js"],"names":["SliderBtn","props","ifMobile","test","navigator","userAgent","sliderW","offsetLeft","sliderStyle","width","maxWidth","height","backgroundColor","position","border","boxShadow","sliderBtnStyle","zIndex","top","borderRadius","left","cursor","_onStart","e","document","addEventListener","_onMove","_onUp","preventDefault","x","touches","clientX","relX","setState","resize","removeEventListener","state","ele","offsetWidth","getBoundingClientRect","children","Component","AvatarImageCropper","color","isBack","iconStyle","display","fill","userSelect","textStyle","fontSize","rootStyle","textAlign","alignItems","justifyContent","overflow","inputStyle","bottom","right","opacity","previewStyle","backgroundRepeat","backgroundPosition","cropStyle","avatarStyle","sliderConStyle","sliderChildrenDiv","sliderDiv","margin","btnStyle","fontWeight","whiteSpace","verticalAlign","cancelBtnStyle","borderColor","applyBtnStyle","filename","avatar2D","ratio","img2D","origin","img","resetOrientation","file","Promise","resolve","reject","getOrientation","reader","FileReader","onload","event","view","DataView","target","result","getUint16","length","byteLength","offset","marker","getUint32","little","tags","i","readAsArrayBuffer","slice","reset","or","src","window","URL","createObjectURL","Image","canvas","createElement","ctx","getContext","transform","drawImage","toBlob","blob","name","then","catch","preDrop","onDrop","evt","fileList","files","acceptedFiles","maxsize","ifImage","type","indexOf","size","loading","y","relY","push","offsetHeight","sizeW","sizeH","Math","ceil","errorMsg","preview","errorHandler","_onMouseDown","clientY","_onMouseUp","_resize","val","avW","avH","_apply","crop_canvas","value","apply","_cancel","cancel","flexDirection","actions","map","key","res","React","cloneElement","onClick","node","className","loadingNode","noWaterMark","icon","text","backgroundImage","backgroundSize","sliderDivStyle","minWidth","propTypes","PropTypes","bool","element","oneOfType","string","array","number","object","func","Uint8Array","HTMLCanvasElement","canvas_proto","prototype","is_base64_regex","to_data_url","base64_ranks","decode_base64","base64","len","buffer","outptr","last","save","rank","code","undef","charCodeAt","toBlobHD","callback","mozGetAsFile","msToBlob","args","Array","call","arguments","dataURI","header_end","data","substring","is_base64","Blob","fake","encoding","decodeURIComponent","toDataURLHD","self","content"],"mappings":"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","file":"react-avatar-image-cropper.js","sourcesContent":["import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\n\nclass SliderBtn extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            relX: 0\n        }\n    }\n\n    componentDidMount() {\n        this.sliderW = this.ele.offsetWidth;\n        this.offsetLeft = this.ele.getBoundingClientRect().left\n        if (this.ifMobile) {\n            this.ele.children[0].addEventListener('touchstart', this._onStart)\n        } else {\n            this.ele.children[0].addEventListener('mousedown', this._onStart)\n        }\n    }\n\n    ifMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n    sliderW = 0;\n    offsetLeft = 0;\n\n    sliderStyle = {\n        width: '90%',\n        maxWidth: '250px',\n        height: '7px',\n        backgroundColor: '#e6ecf0',\n        position: 'relative',\n        border: 0,\n        boxShadow: 'inset 0 0 3px rgba(0,0,0,0.15)',\n    }\n\n    sliderBtnStyle = {\n        position: 'absolute',\n        zIndex: '2',\n        width: '16px',\n        height: '16px',\n        top: '-5px',\n        borderRadius: '50%',\n        backgroundColor: '#fff',\n        left: '0%',\n        cursor: 'pointer',\n        boxShadow: '0 0 3px rgba(0,0,0,0.1)',\n        border: '1px solid #c5c5c5'\n    }\n\n    _onStart = (e) => {\n        if (this.ifMobile) {\n            document.addEventListener('touchmove', this._onMove);\n            document.addEventListener('touchend', this._onUp);\n        } else {\n            document.addEventListener('mousemove', this._onMove);\n            document.addEventListener('mouseup', this._onUp);\n        }\n\n        e.preventDefault();\n    }\n    _onMove = (e) => {\n        var x = this.ifMobile ? e.touches[0].clientX : e.clientX;\n        var relX = (x - this.offsetLeft) / this.sliderW * 100;\n        relX = relX > 100 ? 100 : relX;\n        relX = relX < 0 ? 0 : relX;\n        this.setState({\n            relX: relX\n        })\n        this.props.resize(relX);\n        e.preventDefault();\n    }\n    _onUp = (e) => {\n        if (this.ifMobile) {\n            document.removeEventListener('touchmove', this._onMove);\n            document.removeEventListener('touchend', this._onUp);\n        } else {\n            document.removeEventListener('mousemove', this._onMove);\n            document.removeEventListener('mouseup', this._onUp);\n        }\n        e.preventDefault();\n    }\n\n    render() {\n        return (\n            <div ref={ele => this.ele = ele} style={{ ...this.sliderStyle, ...this.props.sliderStyle }}>\n                <span style={{ ...this.sliderBtnStyle, ...this.props.sliderBtnStyle, left: this.state.relX + '%' }}\n                ></span>\n            </div>\n        );\n    }\n}\n\nclass AvatarImageCropper extends Component {\n    static propTypes = {\n        /**\n         * Should be used to determine if has background.\n         */\n        isBack: PropTypes.bool,\n        /**\n         * Should be used to determine if has water mark.\n         */\n        noWaterMark: PropTypes.bool,\n        /**\n         * Should be used to pass `icon` components.\n         */\n        icon: PropTypes.element,\n        /**\n        * Should be used to pass loading component.\n        */\n        loadingNode: PropTypes.element,\n        /**\n        * Should be used to pass text or component.\n        */\n        text: PropTypes.oneOfType([PropTypes.element, PropTypes.string]),\n        /**\n         * Should be used to pass `actions` array of components.\n         */\n        actions: PropTypes.array,\n        /**\n         * Should be used to for file maxsize.\n         */\n        maxsize: PropTypes.number,\n        /**\n         * The css class name of the root element.\n         */\n        className: PropTypes.string,\n        /**\n         * Override the inline-styles of the initial icon style.\n         */\n        iconStyle: PropTypes.object,\n        /**\n         * Override the inline-styles of the initial text style.\n         */\n        textStyle: PropTypes.object,\n        /**\n         * Override the inline-styles of the root element.\n         */\n        rootStyle: PropTypes.object,\n        /**\n         * Override the inline-styles of the slider conatiner.\n         */\n        sliderConStyle: PropTypes.object,\n        /**\n         * Override the inline-styles of the slider conatiner children div.\n         */\n        sliderChildrenDiv: PropTypes.object,\n        /**\n         * Override the inline-styles of the slider div.\n         */\n        sliderDivStyle: PropTypes.object,\n        /**\n         * Override the inline-styles of the slider.\n         */\n        sliderStyle: PropTypes.object,\n        /**\n         * Override the inline-styles of the slider drag button.\n         */\n        sliderBtnStyle: PropTypes.object,\n        /**\n        * Override the inline-styles of the cancel button.\n        */\n        cancelBtnStyle: PropTypes.object,\n        /**\n        * Override the inline-styles of the apply button.\n        */\n        applyBtnStyle: PropTypes.object,\n        /**\n         * Called when apply clicked\n         */\n        apply: PropTypes.func,\n        /**\n         * Called when canceled.\n         */\n        cancel: PropTypes.func,\n        /**\n         * error with file.\n         */\n        errorHandler: PropTypes.func,\n    };\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            preview: null,\n            loading: false,\n            x: 0,\n            y: 0,\n            relX: 0,\n            relY: 0,\n            sizeW: 0,\n            sizeH: 0,\n            errorMsg: ''\n        }\n    }\n    color = this.props.isBack ? '#ffffff' : 'rgba(148,148,148,1)';\n\n    ifMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n\n    iconStyle = {\n        display: 'inline-block',\n        color: this.color,\n        fill: 'currentcolor',\n        height: 32,\n        width: 32,\n        userSelect: 'none'\n    };\n\n    textStyle = {\n        color: this.color,\n        fontSize: '18px'\n    };\n\n    rootStyle = {\n        textAlign: 'center',\n        height: '100%',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        position: 'relative',\n        overflow: 'hidden'\n    };\n\n    inputStyle = {\n        position: 'absolute',\n        top: 0,\n        bottom: 0,\n        right: 0,\n        left: 0,\n        opacity: 0,\n        height: '100%',\n        zIndex: 8,\n        width: '100%',\n        cursor: 'pointer'\n    };\n\n    previewStyle = {\n        position: 'absolute',\n        top: 0,\n        bottom: 0,\n        right: 0,\n        left: 0,\n        zIndex: 9,\n        backgroundRepeat: 'no-repeat',\n        cursor: 'move',\n        backgroundPosition: '0% 0%'\n    }\n\n    cropStyle = {\n        height: '100%',\n        width: '100%',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        backgroundColor: 'rgba(0,0,0,0.5)'\n    }\n\n    avatarStyle = {\n        height: '100%',\n        display: 'block',\n        position: 'relative',\n        backgroundColor: this.props.isBack ? 'rgba(0,0,0,0.4)' : 'transparent'\n    }\n\n    sliderConStyle = {\n        position: 'absolute',\n        top: '100%',\n        right: 0,\n        left: 0,\n        zIndex: 9,\n        backgroundColor: '#222',\n        display: 'flex',\n        justifyContent: 'center'\n    }\n\n    sliderChildrenDiv = {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        maxWidth: '600px',\n        width: '100%'\n    }\n    sliderDiv = { height: '20px', margin: '5px', display: 'flex', alignItems: 'center', justifyContent: 'center', width: '100%' }\n\n    btnStyle = {\n        display: 'inline-block',\n        fontSize: '14px',\n        fontWeight: 400,\n        textAlign: 'center',\n        whiteSpace: 'nowrap',\n        verticalAlign: 'middle',\n        cursor: 'pointer',\n        border: '1px solid transparent',\n        borderRadius: '4px',\n        margin: '5px'\n    }\n    cancelBtnStyle = {\n        ...this.btnStyle,\n        color: '#333',\n        backgroundColor: '#fff',\n        borderColor: '#ccc',\n    }\n\n\n    applyBtnStyle = {\n        ...this.btnStyle,\n        color: '#fff',\n        backgroundColor: '#5cb85c',\n        borderColor: '#4cae4c'\n    }\n\n    ele = null;\n    filename = '';\n    avatar2D = {\n        width: 0,\n        height: 0,\n        ratio: 0\n    }\n    img2D = {\n        width: 0,\n        height: 0,\n        ratio: 0\n    }\n    origin = {\n        width: 0,\n        height: 0\n    }\n    img = null\n\n\n    componentDidMount() {\n        this.avatar2D.width = this.ele.offsetWidth;\n        this.avatar2D.height = this.ele.offsetHeight;\n        if (this.avatar2D.width < 200) {\n            this.sliderChildrenDiv = { ...this.sliderChildrenDiv, flexDirection: 'column' }\n        }\n    }\n\n    resetOrientation = (file) => {\n        return new Promise((resolve, reject) => {\n            const getOrientation = () => {\n                return new Promise((resolve) => {\n                    var reader = new FileReader();\n                    reader.onload = function (event) {\n                        var view = new DataView(event.target.result);\n\n                        if (view.getUint16(0, false) != 0xFFD8) return resolve(-2);\n\n                        var length = view.byteLength,\n                            offset = 2;\n\n                        while (offset < length) {\n                            var marker = view.getUint16(offset, false);\n                            offset += 2;\n\n                            if (marker == 0xFFE1) {\n                                if (view.getUint32(offset += 2, false) != 0x45786966) {\n                                    return resolve(-1);\n                                }\n                                var little = view.getUint16(offset += 6, false) == 0x4949;\n                                offset += view.getUint32(offset + 4, little);\n                                var tags = view.getUint16(offset, little);\n                                offset += 2;\n\n                                for (var i = 0; i < tags; i++)\n                                    if (view.getUint16(offset + (i * 12), little) == 0x0112)\n                                        return resolve(view.getUint16(offset + (i * 12) + 8, little));\n                            }\n                            else if ((marker & 0xFF00) != 0xFF00) break;\n                            else offset += view.getUint16(offset, false);\n                        }\n                        return resolve(-1);\n                    };\n                    reader.readAsArrayBuffer(file.slice(0, 64 * 1024));\n                })\n            }\n            const reset = (or) => {\n                return new Promise((resolve) => {\n                    if (or === 1) {\n                        return resolve(file);\n                    }\n                    var src = window.URL.createObjectURL(file);\n                    var img = new Image();\n                    img.src = src;\n                    img.onload = () => {\n                        var width = img.width,\n                            height = img.height,\n                            canvas = document.createElement('canvas'),\n                            ctx = canvas.getContext(\"2d\");\n                        if (4 < or && or < 9) {\n                            canvas.width = height;\n                            canvas.height = width;\n                        } else {\n                            canvas.width = width;\n                            canvas.height = height;\n                        }\n\n                        // transform context before drawing image\n                        switch (or) {\n                            case 2: ctx.transform(-1, 0, 0, 1, width, 0); break;\n                            case 3: ctx.transform(-1, 0, 0, -1, width, height); break;\n                            case 4: ctx.transform(1, 0, 0, -1, 0, height); break;\n                            case 5: ctx.transform(0, 1, 1, 0, 0, 0); break;\n                            case 6: ctx.transform(0, 1, -1, 0, height, 0); break;\n                            case 7: ctx.transform(0, -1, -1, 0, height, width); break;\n                            case 8: ctx.transform(0, -1, 1, 0, 0, width); break;\n                            default: break;\n                        }\n\n                        // draw image\n                        ctx.drawImage(img, 0, 0);\n                        canvas.toBlob((blob) => {\n                            blob.name = file.name;\n                            resolve(blob);\n                        })\n                    }\n                })\n            }\n            Promise.resolve()\n                .then(getOrientation)\n                .then(reset)\n                .then(resolve)\n                .catch(reject)\n        })\n    }\n\n    preDrop = (file) => {\n        return new Promise((resolve, reject) => {\n            if (this.props.preDrop) {\n                this.props.preDrop(file)\n            }\n\n            return resolve()\n        })\n    }\n\n    onDrop = (evt) => {\n        var fileList = evt.target.files\n        var acceptedFiles = [];\n        var maxsize = this.props.maxsize\n            ? this.props.maxsize\n            : 1024 * 1024 * 2;\n        var file = fileList[0];\n        if (!file) {\n            return\n        }\n        var ifImage = file.type.indexOf('png') >= 0 || file.type.indexOf('jpg') >= 0 || file.type.indexOf('jpeg') >= 0;\n\n        if (ifImage && file.size <= maxsize) {\n            this.setState({\n                loading: true,\n                x: 0,\n                y: 0,\n                relX: 0,\n                relY: 0,\n            });\n\n            this.preDrop(file).then(() => this.resetOrientation(file)).then((file) => {\n                acceptedFiles.push(file);\n                var src = window.URL.createObjectURL(file);\n                var img = new Image();\n                img.src = src;\n                img.onload = () => {\n                    // preDrop patch: recalculate effective size if the viewport was updated in preDrop\n                    this.avatar2D.width = this.ele.offsetWidth;\n                    this.avatar2D.height = this.ele.offsetHeight;\n\n                    this.img = img;\n                    this.img2D.width = img.width;\n                    this.img2D.height = img.height;\n                    this.img2D.ratio = img.width / img.height;\n                    var sizeW = this.img2D.ratio >= 1 ? this.avatar2D.height * this.img2D.ratio : this.avatar2D.width;\n                    sizeW = sizeW < this.avatar2D.width ? this.avatar2D.width : sizeW\n                    var sizeH = sizeW / this.img2D.ratio;\n                    this.setState({\n                        sizeW: Math.ceil(sizeW),\n                        sizeH: sizeH,\n                        errorMsg: '',\n                        loading: false\n                    })\n                    this.origin = {\n                        width: sizeW,\n                        height: sizeH\n                    }\n                };\n                file.preview = src;\n\n                if (acceptedFiles.length) {\n                    this.filename = acceptedFiles[0].name;\n                    this.setState({ preview: acceptedFiles[0].preview })\n                    if (this.props.onDrop) {\n                        this\n                            .props\n                            .onDrop(acceptedFiles[0]);\n                    }\n                }\n            }).catch(() => {\n                this.setState({\n                    loading: false\n                });\n            })\n        } else if (!ifImage) {\n            if (this.props.errorHandler) {\n                this.props.errorHandler('not_image')\n                return;\n            } else {\n                this.setState({\n                    errorMsg: 'Please upload png/jpg/jpeg image'\n                })\n            }\n        } else if (file.size > maxsize) {\n            if (this.props.errorHandler) {\n                this.props.errorHandler('maxsize')\n                return;\n            } else {\n                this.setState({\n                    errorMsg: 'The size of image is too large'\n                })\n            }\n        }\n\n    }\n\n    _onMouseDown = (e) => {\n        if (this.ifMobile) {\n            this.setState({\n                x: e.touches[0].clientX - this.state.relX,\n                y: e.touches[0].clientY - this.state.relY\n            })\n            document.addEventListener('touchmove', this._onMove);\n            document.addEventListener('touchend', this._onMouseUp);\n        } else {\n            this.setState({\n                x: e.clientX - this.state.relX,\n                y: e.clientY - this.state.relY\n            })\n            document.addEventListener('mousemove', this._onMove);\n            document.addEventListener('mouseup', this._onMouseUp);\n        }\n\n        e.preventDefault();\n    }\n    _onMove = (e) => {\n        var x = this.ifMobile ? e.touches[0].clientX : e.clientX\n        var y = this.ifMobile ? e.touches[0].clientY : e.clientY\n        var relX = this.state.x - x;\n        var relY = this.state.y - y;\n        if (relX < this.state.sizeW - this.avatar2D.width && relX > 0) {\n            this.setState({\n                relX: -relX\n            })\n        }\n        if (relY < this.state.sizeH - this.avatar2D.height && relY > 0) {\n            this.setState({\n                relY: -relY\n            })\n        }\n\n        e.preventDefault();\n    }\n    _onMouseUp = (e) => {\n        if (this.ifMobile) {\n            document.removeEventListener('touchmove', this._onMove);\n            document.removeEventListener('touchend', this._onMouseUp);\n        } else {\n            document.removeEventListener('mousemove', this._onMove);\n            document.removeEventListener('mouseup', this._onMouseUp);\n        }\n\n        e.preventDefault();\n    }\n    _resize = (val) => {\n        var sizeW = this.origin.width * (1 + val / 50);\n        var sizeH = this.origin.height * (1 + val / 50);\n        var avW = sizeW - this.avatar2D.width;\n        var avH = sizeH - this.avatar2D.height;\n        var relX = -this.state.relX > avW ? -avW : this.state.relX\n        var relY = -this.state.relY > avH ? -avH : this.state.relY\n        this.setState({\n            sizeH: sizeH,\n            sizeW: sizeW,\n            relX: relX,\n            relY: relY\n        });\n    }\n    _apply = () => {\n        var crop_canvas = document.createElement('canvas');\n        crop_canvas.width = this.avatar2D.width;\n        crop_canvas.height = this.avatar2D.height;\n        var ratio = this.state.sizeW / this.img2D.width;\n        crop_canvas.getContext('2d').drawImage(this.img, -this.state.relX / ratio, -this.state.relY / ratio, this.img2D.width, this.img2D.height, 0, 0, this.state.sizeW, this.state.sizeH);\n        crop_canvas.toBlob((blob) => {\n            this.ele.children[0].children[1].value = \"\"\n            this.setState({\n                preview: null\n            })\n            blob.name = this.filename;\n            this.props.apply(blob);\n        });\n\n    }\n    _cancel = () => {\n        this.ele.children[0].children[1].value = \"\"\n        this.setState({\n            preview: null\n        })\n        if (this.props.cancel) {\n            this.props.cancel();\n        }\n    }\n\n    render() {\n        const { relX, relY, sizeW, sizeH } = this.state;\n        var actions = this.props.actions ?\n            this.props.actions.map((ele, key) => {\n                var res = null;\n                switch (key) {\n                    case 0:\n                        res = React.cloneElement(\n                            ele,\n                            { onClick: this._cancel }\n                        );\n                        break;\n                    case 1:\n                        res = React.cloneElement(\n                            ele,\n                            { onClick: this._apply }\n                        );\n                    default:\n                        break;\n                }\n                return res\n            })\n            :\n            null\n        return (\n            <avatar-image ref={node => this.ele = node} class={this.props.className}\n                style={{ ...this.avatarStyle, ...this.props.avatarStyle }}>\n                <div style={{ ...this.rootStyle, ...this.props.rootStyle }}>\n                    {\n                        this.state.loading ?\n                            this.props.loadingNode ? this.props.loadingNode\n                                : <div>Loading...</div>\n                            :\n                            <div>\n                                {\n                                    !this.props.noWaterMark &&\n                                    <div>\n                                        {this.props.icon\n                                            ? this.props.icon\n                                            :\n                                            (\n                                                <svg viewBox=\"0 0 24 24\" style={{ ...this.iconStyle, ...this.props.iconStyle }}>\n                                                    <circle cx=\"12\" cy=\"12\" r=\"3.2\"></circle>\n                                                    <path\n                                                        d=\"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z\"></path>\n                                                </svg>\n                                            )\n                                        }\n                                        <div style={{ ...this.textStyle, ...this.props.textStyle }}>{this.props.text ? this.props.text : 'Upload photo'}</div>\n                                    </div>\n                                }\n                                <p style={{ color: 'red' }}>{this.state.errorMsg}</p>\n                            </div>\n                    }\n                    <input\n                        style={{ ...this.inputStyle }}\n                        type='file'\n                        accept='image/*'\n                        onChange={(e) => {\n                            this.onDrop(e)\n                        }} />\n                    {\n                        this.state.preview &&\n                        (\n                            <div>\n                                <div\n                                    onMouseDown={this._onMouseDown}\n                                    onTouchStart={this._onMouseDown}\n                                    style={{\n                                        ...this.previewStyle,\n                                        backgroundImage: 'url(' + this.state.preview + ')',\n                                        backgroundSize: sizeW + 'px ' + sizeH + 'px',\n                                        backgroundPosition: '' + relX + 'px ' + relY + 'px'\n                                    }}>\n                                </div>\n\n                            </div>\n                        )\n                    }\n                </div>\n                {\n                    this.state.preview &&\n                    (\n                        <div style={{ ...this.sliderConStyle, ...this.props.sliderConStyle }}>\n                            <div style={{ ...this.sliderChildrenDiv, ...this.props.sliderChildrenDiv }}>\n                                <div style={{ ...this.sliderDiv, ...this.props.sliderDivStyle }}>\n                                    <SliderBtn sliderBtnStyle={this.props.sliderBtnStyle} sliderStyle={this.props.sliderStyle} resize={this._resize} />\n                                </div>\n                                <div name='action-con' style={{ display: 'flex', minWidth: '100px' }}>\n                                    {\n                                        actions ?\n                                            actions\n                                            :\n                                            [\n                                                <button style={{ ...this.cancelBtnStyle, ...this.props.cancelBtnStyle }} key={0} onClick={this._cancel}>\n                                                    <svg fill=\"#000000\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\">\n                                                        <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\" />\n                                                        <path d=\"M0 0h24v24H0z\" fill=\"none\" />\n                                                    </svg>\n                                                </button>,\n                                                <button style={{ ...this.applyBtnStyle, ...this.props.applyBtnStyle }} key={1} onClick={this._apply}>\n                                                    <svg fill=\"#ffffff\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\">\n                                                        <path d=\"M0 0h24v24H0z\" fill=\"none\" />\n                                                        <path d=\"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z\" />\n                                                    </svg>\n                                                </button>\n                                            ]\n                                    }\n                                </div>\n                            </div>\n\n                        </div>\n                    )\n                }\n            </avatar-image>\n\n        );\n    }\n}\n\n\n\n\n\n/* canvas-toBlob.js\n * A canvas.toBlob() implementation.\n * 2016-05-26\n *\n * By Eli Grey, http://eligrey.com and Devin Samarin, https://github.com/eboyjr\n * License: MIT\n *   See https://github.com/eligrey/canvas-toBlob.js/blob/master/LICENSE.md\n */\n\n/*global self */\n/*jslint bitwise: true, regexp: true, confusion: true, es5: true, vars: true, white: true,\n  plusplus: true */\n\n/*! @source http://purl.eligrey.com/github/canvas-toBlob.js/blob/master/canvas-toBlob.js */\n\n(function (view) {\n    \"use strict\";\n\n  if (view) {\n    var\n        Uint8Array = view.Uint8Array\n        , HTMLCanvasElement = view.HTMLCanvasElement\n        , canvas_proto = HTMLCanvasElement && HTMLCanvasElement.prototype\n        , is_base64_regex = /\\s*;\\s*base64\\s*(?:;|$)/i\n        , to_data_url = \"toDataURL\"\n        , base64_ranks\n        , decode_base64 = function (base64) {\n            var\n                len = base64.length\n                , buffer = new Uint8Array(len / 4 * 3 | 0)\n                , i = 0\n                , outptr = 0\n                , last = [0, 0]\n                , state = 0\n                , save = 0\n                , rank\n                , code\n                , undef\n                ;\n            while (len--) {\n                code = base64.charCodeAt(i++);\n                rank = base64_ranks[code - 43];\n                if (rank !== 255 && rank !== undef) {\n                    last[1] = last[0];\n                    last[0] = code;\n                    save = (save << 6) | rank;\n                    state++;\n                    if (state === 4) {\n                        buffer[outptr++] = save >>> 16;\n                        if (last[1] !== 61 /* padding character */) {\n                            buffer[outptr++] = save >>> 8;\n                        }\n                        if (last[0] !== 61 /* padding character */) {\n                            buffer[outptr++] = save;\n                        }\n                        state = 0;\n                    }\n                }\n            }\n            // 2/3 chance there's going to be some null bytes at the end, but that\n            // doesn't really matter with most image formats.\n            // If it somehow matters for you, truncate the buffer up outptr.\n            return buffer;\n        }\n        ;\n    if (Uint8Array) {\n        base64_ranks = new Uint8Array([\n            62, -1, -1, -1, 63, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1\n            , -1, -1, 0, -1, -1, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9\n            , 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25\n            , -1, -1, -1, -1, -1, -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35\n            , 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51\n        ]);\n    }\n    if (HTMLCanvasElement && (!canvas_proto.toBlob || !canvas_proto.toBlobHD)) {\n        if (!canvas_proto.toBlob)\n            canvas_proto.toBlob = function (callback, type /*, ...args*/) {\n                if (!type) {\n                    type = \"image/png\";\n                } if (this.mozGetAsFile) {\n                    callback(this.mozGetAsFile(\"canvas\", type));\n                    return;\n                } if (this.msToBlob && /^\\s*image\\/png\\s*(?:$|;)/i.test(type)) {\n                    callback(this.msToBlob());\n                    return;\n                }\n\n                var\n                    args = Array.prototype.slice.call(arguments, 1)\n                    , dataURI = this[to_data_url].apply(this, args)\n                    , header_end = dataURI.indexOf(\",\")\n                    , data = dataURI.substring(header_end + 1)\n                    , is_base64 = is_base64_regex.test(dataURI.substring(0, header_end))\n                    , blob\n                    ;\n                if (Blob.fake) {\n                    // no reason to decode a data: URI that's just going to become a data URI again\n                    blob = new Blob\n                    if (is_base64) {\n                        blob.encoding = \"base64\";\n                    } else {\n                        blob.encoding = \"URI\";\n                    }\n                    blob.data = data;\n                    blob.size = data.length;\n                } else if (Uint8Array) {\n                    if (is_base64) {\n                        blob = new Blob([decode_base64(data)], { type: type });\n                    } else {\n                        blob = new Blob([decodeURIComponent(data)], { type: type });\n                    }\n                }\n                callback(blob);\n            };\n\n        if (!canvas_proto.toBlobHD && canvas_proto.toDataURLHD) {\n            canvas_proto.toBlobHD = function () {\n                to_data_url = \"toDataURLHD\";\n                var blob = this.toBlob();\n                to_data_url = \"toDataURL\";\n                return blob;\n            }\n        } else {\n            canvas_proto.toBlobHD = canvas_proto.toBlob;\n        }\n    }\n  }\n}(typeof self !== \"undefined\" && self || typeof window !== \"undefined\" && window || this && this.content || this));\n\n\nexport default AvatarImageCropper;\n"]}